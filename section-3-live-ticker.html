<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S3: Live-Ticker</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-primary: #121212;
      --bg-surface: #252525;

      --orange-primary: #CC5500;
      --orange-muted: rgba(204, 85, 0, 0.08);
      --orange-border: rgba(204, 85, 0, 0.25);

      --text-primary: rgba(255, 255, 255, 0.87);
      --text-secondary: rgba(255, 255, 255, 0.60);
      --text-tertiary: rgba(255, 255, 255, 0.38);

      --border-subtle: rgba(255, 255, 255, 0.08);

      --success: #4ADE80;

      --font-sans: 'DM Sans', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;

      --radius: 5px;
      --transition-fast: 200ms cubic-bezier(0.2, 0, 0, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-sans);
      font-size: 15px;
      color: var(--text-secondary);
      background-color: var(--bg-primary);
      line-height: 1.6;
      padding: 48px 20px;
    }

    h2 {
      font-size: 26px;
      color: var(--text-primary);
      font-weight: 700;
      margin-bottom: 32px;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
    }

    /* ==================== TICKER CONTAINER ==================== */

    .ticker-container {
      background-color: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius);
      padding: 32px;
      max-width: 600px;
      margin: 0 auto;
    }

    .ticker-header {
      margin-bottom: 24px;
      text-align: center;
    }

    .ticker-title {
      font-size: 18px;
      color: var(--text-primary);
      font-weight: 600;
      margin-bottom: 8px;
    }

    .ticker-subtitle {
      font-size: 13px;
      color: var(--text-tertiary);
      font-family: var(--font-mono);
    }

    /* ==================== PROGRESS BAR ==================== */

    .progress-bar {
      width: 100%;
      height: 4px;
      background-color: var(--border-subtle);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 24px;
    }

    .progress-fill {
      height: 100%;
      background-color: var(--orange-primary);
      width: 0%;
      transition: width 0.3s ease-out;
    }

    /* ==================== STEPS LIST ==================== */

    .steps-list {
      list-style: none;
      margin-bottom: 24px;
    }

    .step {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 0;
      transition: all var(--transition-fast);
    }

    .step-icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .step-text {
      flex: 1;
      font-size: 14px;
      color: var(--text-tertiary);
    }

    .step--completed .step-icon {
      color: var(--success);
    }

    .step--completed .step-text {
      color: var(--text-secondary);
      opacity: 0.6;
    }

    .step--active .step-text {
      color: var(--text-primary);
      font-weight: 500;
    }

    /* ==================== FEATURE IMPORTANCE ==================== */

    .feature-importance {
      display: none;
      animation: fadeIn 0.4s ease-in;
    }

    .feature-importance.visible {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-box {
      background-color: var(--orange-muted);
      border: 1px solid var(--orange-border);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 24px;
      text-align: center;
    }

    .result-label {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 4px;
    }

    .result-price {
      font-size: 32px;
      font-weight: 700;
      color: var(--orange-primary);
      font-family: var(--font-mono);
    }

    .factors-intro {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 16px;
    }

    .factors-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .factor-group-label {
      font-size: 11px;
      font-family: var(--font-mono);
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 8px;
      margin-top: 16px;
    }

    .factor-group-label:first-child {
      margin-top: 0;
    }

    .factor {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .factor-bar-container {
      flex: 1;
      position: relative;
      height: 32px;
      background-color: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border-subtle);
      border-radius: 4px;
      overflow: hidden;
    }

    .factor-bar {
      height: 100%;
      background-color: var(--orange-primary);
      width: 0%;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      padding-left: 12px;
    }

    .factor-bar--main {
      opacity: 1;
    }

    .factor-bar--secondary {
      opacity: 1;
    }

    .factor-name {
      font-size: 13px;
      font-weight: 500;
      color: var(--text-primary);
      white-space: nowrap;
    }

    .factors-divider {
      margin-bottom: 4px;
    }

    /* ==================== CONTROLS ==================== */

    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 24px;
    }

    .btn {
      padding: 10px 20px;
      background-color: var(--orange-primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      font-family: var(--font-sans);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .btn:hover {
      background-color: #D96600;
      transform: translateY(-1px);
    }

    .btn--secondary {
      background-color: transparent;
      border: 1.5px solid var(--orange-primary);
      color: var(--orange-primary);
    }

    .btn--secondary:hover {
      background-color: var(--orange-muted);
    }
  </style>
</head>
<body>
  <div class="container">

    <h2>Sektion 3: Live-Ticker & Feature Importance</h2>

    <div class="ticker-container">

      <div class="ticker-header">
        <div class="ticker-title">Ihr Angebot entsteht...</div>
        <div class="ticker-subtitle" id="step-counter">Schritt 0 von 8</div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>

      <ul class="steps-list" id="steps">
        <li class="step" id="step-1">
          <span class="step-icon">·</span>
          <span class="step-text">Projektdaten übernommen</span>
        </li>
        <li class="step" id="step-2">
          <span class="step-icon">·</span>
          <span class="step-text">Geometrie-Analyse der Werkstückoberfläche</span>
        </li>
        <li class="step" id="step-3">
          <span class="step-icon">·</span>
          <span class="step-text">Komplexitätsbewertung nach Faraday-Risiko</span>
        </li>
        <li class="step" id="step-4">
          <span class="step-icon">·</span>
          <span class="step-text">Materialbedarfsermittlung (Pulververbrauch)</span>
        </li>
        <li class="step" id="step-5">
          <span class="step-icon">·</span>
          <span class="step-text">Zuschlagskalkulation nach Werkstückprofil</span>
        </li>
        <li class="step" id="step-6">
          <span class="step-icon">·</span>
          <span class="step-text">Rüstzeit- und Durchlaufberechnung</span>
        </li>
        <li class="step" id="step-7">
          <span class="step-icon">·</span>
          <span class="step-text">Marktpreisabgleich</span>
        </li>
        <li class="step" id="step-8">
          <span class="step-icon">·</span>
          <span class="step-text">Angebotsoptimierung abgeschlossen</span>
        </li>
      </ul>

      <div class="feature-importance" id="features">
        <div class="result-box">
          <div class="result-label">Ihr Angebot</div>
          <div class="result-price">247,80 €</div>
        </div>

        <div class="factors-intro">
          Dieser Preis basiert hauptsächlich auf:
        </div>

        <div class="factors-list">
          <div class="factor">
            <div class="factor-bar-container">
              <div class="factor-bar factor-bar--main" id="bar-1" style="width: 0%;">
                <span class="factor-name">Bauteilgröße</span>
              </div>
            </div>
          </div>

          <div class="factor">
            <div class="factor-bar-container">
              <div class="factor-bar factor-bar--main" id="bar-2" style="width: 0%;">
                <span class="factor-name">Beschichtungssystem</span>
              </div>
            </div>
          </div>

          <div class="factor">
            <div class="factor-bar-container">
              <div class="factor-bar factor-bar--main" id="bar-3" style="width: 0%;">
                <span class="factor-name">Vorbehandlung</span>
              </div>
            </div>
          </div>

          <div class="factor">
            <div class="factor-bar-container">
              <div class="factor-bar factor-bar--secondary" id="bar-4" style="width: 0%;">
                <span class="factor-name">Teilegeometrie</span>
              </div>
            </div>
          </div>

          <div class="factor">
            <div class="factor-bar-container">
              <div class="factor-bar factor-bar--secondary" id="bar-5" style="width: 0%;">
                <span class="factor-name">Losgröße</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="start-btn">Animation starten</button>
        <button class="btn btn--secondary" id="reset-btn">Zurücksetzen</button>
      </div>

    </div>

  </div>
  <script>
    const steps = [
      { id: 1, duration: 1800 },
      { id: 2, duration: 1800 },
      { id: 3, duration: 1600 },
      { id: 4, duration: 1400 },
      { id: 5, duration: 1200 },
      { id: 6, duration: 1000 },
      { id: 7, duration: 800 },
      { id: 8, duration: 600 }
    ];

    const spinnerPhases = ['·', '✢', '✳', '✶', '✻', '✽'];
    const factorWidths = [90, 75, 65, 50, 40];

    let currentStep = 0;
    let isRunning = false;
    let spinnerInterval = null;

    const progressBar = document.getElementById('progress');
    const stepCounter = document.getElementById('step-counter');
    const featuresSection = document.getElementById('features');
    const startBtn = document.getElementById('start-btn');
    const resetBtn = document.getElementById('reset-btn');

    function updateProgress(step) {
      const progress = (step / steps.length) * 100;
      progressBar.style.width = `${progress}%`;
      stepCounter.textContent = `Schritt ${step} von ${steps.length}`;
    }

    function completeStep(stepNum) {
      const stepEl = document.getElementById(`step-${stepNum}`);
      stepEl.classList.remove('step--active');
      stepEl.classList.add('step--completed');
      stepEl.querySelector('.step-icon').textContent = '✓';
    }

    function activateStep(stepNum) {
      const stepEl = document.getElementById(`step-${stepNum}`);
      stepEl.classList.add('step--active');

      // Start spinner animation
      let phaseIndex = 0;
      const icon = stepEl.querySelector('.step-icon');
      spinnerInterval = setInterval(() => {
        icon.textContent = spinnerPhases[phaseIndex];
        phaseIndex = (phaseIndex + 1) % spinnerPhases.length;
      }, 120);
    }

    function stopSpinner() {
      if (spinnerInterval) {
        clearInterval(spinnerInterval);
        spinnerInterval = null;
      }
    }

    function animateBars() {
      setTimeout(() => {
        factorWidths.forEach((width, index) => {
          setTimeout(() => {
            document.getElementById(`bar-${index + 1}`).style.width = `${width}%`;
          }, index * 100);
        });
      }, 200);
    }

    async function runAnimation() {
      if (isRunning) return;
      isRunning = true;
      startBtn.disabled = true;

      for (let i = 0; i < steps.length; i++) {
        currentStep = i + 1;
        activateStep(currentStep);
        updateProgress(currentStep);

        await new Promise(resolve => setTimeout(resolve, steps[i].duration));

        stopSpinner();
        completeStep(currentStep);
      }

      featuresSection.classList.add('visible');
      animateBars();

      isRunning = false;
      startBtn.disabled = false;
      startBtn.textContent = 'Erneut starten';
    }

    function reset() {
      stopSpinner();
      currentStep = 0;
      isRunning = false;
      progressBar.style.width = '0%';
      stepCounter.textContent = 'Schritt 0 von 8';
      featuresSection.classList.remove('visible');
      startBtn.textContent = 'Animation starten';
      startBtn.disabled = false;

      for (let i = 1; i <= steps.length; i++) {
        const stepEl = document.getElementById(`step-${i}`);
        stepEl.classList.remove('step--active', 'step--completed');
        stepEl.querySelector('.step-icon').textContent = '·';
      }

      for (let i = 1; i <= 5; i++) {
        document.getElementById(`bar-${i}`).style.width = '0%';
      }
    }

    startBtn.addEventListener('click', runAnimation);
    resetBtn.addEventListener('click', reset);
  </script>
</body>
</html>
